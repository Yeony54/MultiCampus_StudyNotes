

Python Class

## Class 객체지향 프로그래밍

앞서 구조적프로그래밍 (절차적 프로그래밍)과 객체지향 프로그래밍을 알아보았다.

**class란?**

- 객체 모델링의 수단
- ADT(Abstract Data Type) 여러 데이터 타입을 묶어 새로운 데이터 타입으로 만드는 추상적인 data type
- instance를 만드는 도구



앞에서 사용해본 class 생성방법에 대한개념을 좀 더 알아보고, 상속에 대해 공부해보자.



- class의 요소
- class 생성
- class 메소드
- class 상속
- python module



---



#### Python : Class Instance, Property



class를 하면서 알아야 할 용어 중 **instance**와 **property**가 있다. 

**instance**는 객체를 의미하며, class로부터 만들어진 객체라고 생각하면 된다.

**property**는 변수를 의미하며, instance 내에 선언된 변수이다.

아래 설명과 예시를 보며 instance와 property를 확인해 보자.





---



#### Python : magic function, dot operation



우선 설명이 간단한 **dot operation**에 대해서 설명한다.

dot operation은 이전에 공부했던 method에서 이미 접해보았던 친구이다.

dot operation은 `(instance).(property or method)`의 형식으로 사용되며, instance 혹은 상위 class에 저장되어있는 property나 method를 참조할 수 있는 기능을 가진다.



다음으로 **magic function**을 설명한다.

모든 class는 특별한 형태의 함수를 사용할 수 있다. 이를 **magic function** 이라고 부르며, `__(이름)__`의 형태로 되어있다.



필수로 자주 사용되는 것에는 `__init__`과 `__str__`을 예시로 들 수 있다.

`__init__()`이 magic function 의 종류 중 하나인데 이 함수는 instance를 초기화 해주는 역할을 수행하며, initializer 라고 부르기도 한다.

`__str__()`은 class에서 사용하는 print의 개념이라고 생각하면 된다.

만약 아무런 설정 없이 `print(class)`를 하게 된다면 class가 저장된 레퍼런스를 출력해버리게 된다.

이런 경우에 print()에 class가 인자로 들어오게 된다면,  `__str__()`를 자동 호출해서 작성해 놓은 코드를 출력할 수 있게 해준다.





----





#### Python : Class 생성 예시

아래의 예시는 위에서 설명했던 함수와 개념들을 작성해 놓은것이다.

```python
class Car(object):
    
    def __init__(self, car_number, car_price, car_speed):
         self.car_number = car_number
        self.car_price = car_price
        self.car_speed = car_speed
        
     def __str__(self):
        return self.car_number
        
car1 = Car('123', 1000, 0)

print(car1.car_number)   # 123
print(car1)              # 123
```



`__init__()` 는 인자로 self, car_number, car_price, car_speed를 받고 있다. 

**self**는 현재 사용하는 객체를 가르키는 reference이다.

car_number, car_price, car_speed 가 바로 property 이며, `self.(property)`의 형태로 객체의 변수를 초기화 시켜주는 작업이 필요하다.



`__str__()`은 print() 함수로 class 객체가 인자로 불러질 때, 자동으로 수행되는 함수이다.

수행시, `self.car_number`를 return 하도록 작성이 되어있고, 출력결과를 보면 확인할 수 있다.



> **함수의 인자와 instance의 변수**
>
> car_number 와 self.car_number는 다른 변수이다.
>
> car_number는 인자를 받아오기 위해 stack에 생성되는 메모리에 저장되는 변수이고, 
>
> self.car_number가 instance(객체)에 저장될 수 있는 메모리 공간이다.



> **dot operation**
>
> self.car_number 에 있는 점(.) 의 의미는 dot operator이다.
>
> 포인터의 기능을 가져, self의 메모리 공간에 있는 car_number를 찾는다고 생각하면 될것같다.
>
> self는 현재 사용하는 객체를 가르키는 reference 이니, 자신의 메모리 공간에 있는 car_number를 불러온다.





---





#### Python : Class Method



이번에는 class가 동작할 때 필요한 함수, method를 생성해 보자

일반적으로 method(함수)는 property(instance의 변수)와 연계될 때가 많다. 



앞서 만들어둔 Car Class에 속력을 증가시키는 go_front()를 작성해보자.

```python
class Car(object):
    
    def __init__(self, car_number, car_price, car_speed):
        self.car_number = car_number
        self.car_price = car_price
        self.car_speed = car_speed
      
    def go_front(self):
        self.car_speed += 10
        
car1 = Car('123', 1000, 0)

car1.go_front()
print(car1.car_speed) # 10
```

go_front()를 사용하여 self.car_speed를 10 증가시키려고 한다.

car1 객체를 만들어 car1에서 go_front()함수를 `car1.go_front()`로 실행한다.

이후 car1.car_speed를 사용하여 car1의 속도를 출력해 보면 10이 증가한 것을 확인할 수 있다.





---





#### Python : Class variable, instance variable



Class에서 사용하는 변수를 **Property**라고 부른다.

그리고 property는 class variable과 instance variable로 구분된다.

instance variable은 instance마다 각자 따로 가지고 있는 property를 지칭한다.

class variable은 class내에 선언되어 instance들이 공동으로 사용하는 property를 지칭한다.



```python
class Car(object):   
    
    limit_speed = 120  # class variable
    
    def __init__(self, car_number, car_price, car_speed):
        self.car_number = car_number  # instance variable
        self.car_price = car_price    # instance variable
        self.car_speed = car_speed
    
    def find_speeding(self):
        if self.car_speed > Car.limit_speed: 
            # Car.is_speeding을 self.is_speeding으로 사용 가능
            return "과속입니다"
        else :
            return "정상속도입니다"
```

위의 예제를 보면 `is_speeding`이 `__init__()`함수 밖에 선언된 것을 확인할 수 있다.

이는 객체를 생성할때 만들어지는 변수가 아닌 class에 선언된 **class variable**이다.

이외에 `__init__`을 통해 만들어진 변수들은 **instance variable**이라고 할 수 있다.



두번째 `find_speeding()`은 차의 속력이 과속인지, 정상속도인지를 알려주는 함수이다.

class variable의 limit_speed과 instance variable의 car_speed를 비교하여 문자열을 출력한다.

아래에서 출력 예제를 살펴보자.



```python
print(Car.limit_speed)    # 120
print(car1.limit_speed)   # 120
```

class variable은 사용될 때 객체의 이름이 아닌 class의 이름으로 dot operation을 사용할 수 있다.

그래서 `Car.limit_speed`나 `car1.limit_speed`둘 다 limit_speed를 불러올 수 있다.



> **car1 이 limit_speed를 불러오는 과정 간단 설명**
>
> 자료구조 상 car1에는 `__init__`으로 선언된 instance variable만이 저장된다.
>
> `car1.limit_speed`를 통해 class variable을 부르게 되면, 
>
> 자기 자신의 instance namespace를 탐색하고 이후 class namespace에 가서 limit_speed를 불러오게 된다.



class variable 변경예제 1

```python
Car.is_speeding = 100 # class를 이용햇 class variable의 값을 수정 가능
print(Car.is_speeding) # 100
print(car1.is_speeding) # 100
```

class variable 변경예제2

```python
car1.is_speeding = 100 # instance를 이용해서 class variabl의 값을 수정
print(Car.is_speeding) # 120
print(car1.is_speeding) # 100
```



class variable 변경예제 1과 2는 각각 `Car(class)` 와 `car(instance)`에서 class variable 값을 수정한 결과이다.

class variable은 Class를 통해 값을 수정가능하다.

하지만 혹여나 instance를 통해 값 수정을 시도하게 되면, 위에서 다루었던 조회 예제와 달리, 변경할 때에는 instance가 is_speeding을 instance variable에서 조회해보고 없으면 instance namespace에 생성하게 된다.

그래서 예제2의 결과가 다른것이다.





---





#### Python : Ingeritance 상속

**상속**이란, class의 화룡을 높이기 위해 class의 성질을 그대로 이용해 다른 class로 확장시켜 만들 수 있는 기능이다.

앞서 만들었던 Class에서는 `class Car(object): ` 형식으로 object라는 class를 상속해서 만들었다. 이는 상속할 class가 없을 때 사용하는 방법이다.9

따라서, 상속할 class가 있을 때에는 `class Car(상속 할 class)` 형식으로 사용한다.



**<상속없이 만든 클래스 예시>**

```python
class Unit(object) : 
    
    def __init__(self,life):
        self.life = life
        
    def show_status(self):
        print('생명력 : {}'.format(self.life))

class Marine(object):
    
    def __init__(self,life, damage):
        self.life = life
        self.damage = damage
    
    def show_status(self):
        print('생명력 : {}'.format(self.life))
        print('공격력 : {}'.format(self.damage))
```

위의예시는 Unit 클래스와 Marine 클래스를 각각 따로 만든 예시이다.

이를 상속을 사용하여 만든예시가 아래의 예시다.



**<상속으로 만든 클래스 예시>**

```python
# 상속을 이용
class Unit(object) : 
    
    def __init__(self,life):
        self.life = life
        
    def show_status(self):
        print('생명력 : {}'.format(self.life))

class Marine(Unit):
    
    def __init__(self,life, damage):
        # 상위class의 __init__을 호출
        super(Marine, self).__init__(life)
        self.damage = damage
    
    def show_status(self):
        super(Marine, self).show_status()
        print('공격력 : {}'.format(self.damage))
```



예시는 간단한 코드를 사용하여 만들었기 때문에 많은 차이가 보이지 않지만, 

복잡한 코드를 또 만들지 않고 상속하여 사용할 때에는 큰 활용가치를 지닌다.





---



#### Python : module











끝